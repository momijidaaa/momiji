<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>MomijiéŠ€è¡Œï¼ˆé ã‘å…¥ã‚Œï¼†å€Ÿé‡‘ï¼‰</title>
  <style>
    body { text-align: center; font-family: sans-serif; margin-top: 50px; }
    h1 { margin-bottom: 30px; }
    input { padding: 8px; width: 150px; font-size: 16px; text-align: center; }
    .btn {
      padding: 10px 20px;
      font-size: 16px;
      margin: 10px;
      border: none;
      border-radius: 8px;
      background: #3498db;
      color: white;
      cursor: pointer;
    }
    .btn:hover { background: #2980b9; }
    .danger { background: #e74c3c; }
    .danger:hover { background: #c0392b; }
    .home {
      margin-top: 40px;
      padding: 10px 20px;
      border: none;
      border-radius: 8px;
      background: #555;
      color: white;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <h1>ğŸ¦ MomijiéŠ€è¡Œ</h1>

  <p id="wallet">æ‰‹æŒã¡ã‚³ã‚¤ãƒ³: 0</p>
  <p id="bank">éŠ€è¡Œæ®‹é«˜: 0</p>

  <input type="number" id="amount" placeholder="é‡‘é¡ã‚’å…¥åŠ›" min="1"><br>

  <button class="btn" onclick="deposit()">ğŸ’° é ã‘å…¥ã‚Œ</button>
  <button class="btn" onclick="withdraw()">ğŸ’¸ å¼•ãå‡ºã—</button><br>
  <button class="btn danger" onclick="borrow()">ğŸ’µ å€Ÿã‚Šã‚‹</button>
  <button class="btn danger" onclick="repay()">ğŸ’´ è¿”ã™</button>

  <p id="message"></p>

  <button class="home" onclick="location.href='index.html'">â† ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã¸æˆ»ã‚‹</button>

  <script src="coin.js"></script>
  <script>
    function loadBank() {
      return parseInt(localStorage.getItem("bank_coins")) || 0;
    }
    function saveBank(v) {
      localStorage.setItem("bank_coins", v);
    }

    function updateDisplay() {
      const bank = loadBank();
      document.getElementById("wallet").textContent = "æ‰‹æŒã¡ã‚³ã‚¤ãƒ³: " + loadCoins();
      document.getElementById("bank").textContent = "éŠ€è¡Œæ®‹é«˜: " + bank + (bank < 0 ? "ï¼ˆå€Ÿé‡‘ä¸­ğŸ’¦ï¼‰" : "");
    }

    function deposit() {
      const amt = parseInt(document.getElementById("amount").value);
      if (isNaN(amt) || amt <= 0) return alert("é‡‘é¡ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼");
      let wallet = loadCoins();
      if (wallet < amt) return alert("ã‚³ã‚¤ãƒ³ãŒè¶³ã‚Šã¾ã›ã‚“ï¼");
      spendCoins(amt);
      saveBank(loadBank() + amt);
      updateDisplay();
      document.getElementById("message").textContent = `ğŸ’° ${amt}æšã‚’é ã‘ã¾ã—ãŸï¼`;
    }

    function withdraw() {
      const amt = parseInt(document.getElementById("amount").value);
      if (isNaN(amt) || amt <= 0) return alert("é‡‘é¡ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼");
      let bank = loadBank();
      if (bank < amt) return alert("éŠ€è¡Œæ®‹é«˜ãŒè¶³ã‚Šã¾ã›ã‚“ï¼");
      addCoins(amt);
      saveBank(bank - amt);
      updateDisplay();
      document.getElementById("message").textContent = `ğŸ’¸ ${amt}æšã‚’å¼•ãå‡ºã—ã¾ã—ãŸï¼`;
    }

    function borrow() {
      const amt = parseInt(document.getElementById("amount").value);
      if (isNaN(amt) || amt <= 0) return alert("å€Ÿã‚Šã‚‹é‡‘é¡ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼");
      addCoins(amt);
      saveBank(loadBank() - amt); // å€Ÿé‡‘ï¼ãƒã‚¤ãƒŠã‚¹æ®‹é«˜
      updateDisplay();
      document.getElementById("message").textContent = `ğŸ’µ ${amt}æšã‚’å€Ÿã‚Šã¾ã—ãŸï¼ï¼ˆæ®‹é«˜ãŒãƒã‚¤ãƒŠã‚¹ï¼‰`;
    }

    function repay() {
      const amt = parseInt(document.getElementById("amount").value);
      if (isNaN(amt) || amt <= 0) return alert("è¿”ã™é‡‘é¡ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼");
      let wallet = loadCoins();
      let bank = loadBank();
      if (wallet < amt) return alert("ã‚³ã‚¤ãƒ³ãŒè¶³ã‚Šã¾ã›ã‚“ï¼");
      if (bank >= 0) return alert("å€Ÿé‡‘ã¯ã‚ã‚Šã¾ã›ã‚“ï¼");
      spendCoins(amt);
      saveBank(bank + amt);
      updateDisplay();
      document.getElementById("message").textContent = `ğŸ’´ ${amt}æšã‚’è¿”æ¸ˆã—ã¾ã—ãŸï¼`;
    }

    updateDisplay();
  </script>
</body>
</html>
