<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8">
<title>Discord コマンド JSON ジェネレーター</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<style>
body { font-family:sans-serif; background:#f5f5f5; padding:20px; }
.grid { display:flex; gap:20px; flex-wrap:wrap; }
.panel, .preview { background:#fff; padding:16px; border-radius:10px; flex:1; min-width:300px; }
label { font-weight:bold; margin-top:10px; display:block; }
input, select, textarea { width:100%; padding:6px; margin-top:4px; }
button { background:#5865f2; color:white; border:none; border-radius:6px; padding:8px 14px; cursor:pointer; }
.copy-btn { background:#3498db; margin-right:6px; }
footer { margin-top:20px; text-align:center; font-size:0.85em; color:#666; }
pre { background:#f0f0f0; padding:10px; border-radius:6px; white-space:pre-wrap; }
</style>
</head>
<body>

<h1>🍁 Discord コマンド JSON ジェネレーター</h1>

<div class="grid">
  <!-- LEFT -->
  <div class="panel">
    <label>言語を選択</label>
    <div>
      <button id="btn-js" class="lang-btn" data-lang="discord.js" style="background:#5865f2">discord.js</button>
      <button id="btn-py" class="lang-btn" data-lang="discord.py" style="background:#888">discord.py</button>
    </div>

    <label>コマンド名</label>
    <input id="cmd-name" placeholder="例: ban" />

    <label>コマンドタイプ</label>
    <select id="cmd-type">
      <option value="slash">スラッシュコマンド</option>
      <option value="prefix">プレフィックスコマンド</option>
    </select>

    <label>コマンドの説明</label>
    <input id="cmd-desc" placeholder="例: 指定したユーザーをBANします" />

    <label>動作（複数選択可）</label>
    <div>
      <label><input type="checkbox" id="act-send" /> メッセージ送信</label>
      <label><input type="checkbox" id="act-delete" /> メッセージ削除</label>
      <label><input type="checkbox" id="act-timeout" /> タイムアウト</label>
      <label><input type="checkbox" id="act-ban" /> BAN</label>
      <label><input type="checkbox" id="act-kick" /> KICK</label>
      <label><input type="checkbox" id="act-role" /> ロール付与/削除</label>
      <label><input type="checkbox" id="act-other" /> その他カスタム</label>
    </div>

    <label>オプション</label>
    <div>
      <label>送信メッセージ</label>
      <input id="opt-send-text" placeholder="例: {user} をBANしました。理由: {reason}" />
      <label>タイムアウト秒</label>
      <input id="opt-timeout" type="number" placeholder="例: 600" />
      <label>BAN理由</label>
      <input id="opt-ban-reason" placeholder="例: spam" />
      <label>ロール名</label>
      <input id="opt-role-name" placeholder="例: Moderator" />
    </div>

    <label>引数設定</label>
    <div>
      <input id="arg1" placeholder="例: target (ユーザー)" />
      <input id="arg2" placeholder="例: reason (文字列)" />
    </div>

    <button id="generate">JSONを生成</button>
    <a href="index.html" style="display:inline-block;margin-top:10px">トップページへ戻る</a>
  </div>

  <!-- RIGHT -->
  <div class="preview">
    <div>プレビュー</div>
    <pre id="code-area">// JSONがここに表示されます</pre>
    <div>
      <button id="copy" class="copy-btn">コピー</button>
      <button id="download" class="copy-btn" style="background:#2ecc71">保存 (.json)</button>
    </div>
  </div>
</div>

<footer>© 2025 Momiji Web — JSON Command Generator</footer>

<script>
let selectedLang = "discord.js";

document.querySelectorAll(".lang-btn").forEach(btn => {
  btn.addEventListener("click", () => {
    document.querySelectorAll(".lang-btn").forEach(b => b.style.background="#888");
    btn.style.background="#5865f2";
    selectedLang = btn.dataset.lang;
  });
});

document.getElementById("generate").addEventListener("click", () => {
  const json = {
    language: selectedLang,
    commandName: document.getElementById("cmd-name").value || "mycommand",
    commandType: document.getElementById("cmd-type").value,
    description: document.getElementById("cmd-desc").value || "",
    actions: [],
    options: {},
    args: []
  };

  if (document.getElementById("act-send").checked) {
    json.actions.push("send");
    json.options.sendMessage = document.getElementById("opt-send-text").value || "";
  }
  if (document.getElementById("act-delete").checked) json.actions.push("delete");
  if (document.getElementById("act-timeout").checked) {
    json.actions.push("timeout");
    json.options.timeoutSeconds = parseInt(document.getElementById("opt-timeout").value) || 0;
  }
  if (document.getElementById("act-ban").checked) {
    json.actions.push("ban");
    json.options.banReason = document.getElementById("opt-ban-reason").value || "";
  }
  if (document.getElementById("act-kick").checked) json.actions.push("kick");
  if (document.getElementById("act-role").checked) {
    json.actions.push("role");
    json.options.roleName = document.getElementById("opt-role-name").value || "";
  }
  if (document.getElementById("act-other").checked) json.actions.push("other");

  const arg1 = document.getElementById("arg1").value;
  const arg2 = document.getElementById("arg2").value;
  if (arg1) json.args.push(arg1);
  if (arg2) json.args.push(arg2);

  document.getElementById("code-area").textContent = JSON.stringify(json, null, 2);
});

document.getElementById("copy").addEventListener("click", () => {
  navigator.clipboard.writeText(document.getElementById("code-area").textContent);
  alert("コピーしました");
});

document.getElementById("download").addEventListener("click", () => {
  const blob = new Blob([document.getElementById("code-area").textContent], {type: "application/json"});
  const a = document.createElement("a");
  a.href = URL.createObjectURL(blob);
  a.download = "discord_command.json";
  a.click();
});
</script>

</body>
</html>