<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>æ•°å­—ã‚¹ãƒ­ãƒƒãƒˆ</title>
  <style>
    body { text-align: center; font-family: sans-serif; margin-top: 50px; }
    #slot { display: flex; justify-content: center; gap: 20px; }
    .reel-container {
      width: 60px;
      height: 60px; /* 1æ•°å­—åˆ†ã®é«˜ã• */
      overflow: hidden;
      border: 2px solid #333;
      border-radius: 8px;
      font-size: 40px;
      background: #fff;
    }
    .reel {
      display: flex;
      flex-direction: column;
      transform: translateY(0);
      transition: transform 1s ease-out;
    }
    .digit {
      height: 60px;
      line-height: 60px;
    }
    .btn {
      margin-top: 20px;
      padding: 10px 20px;
      font-size: 16px;
      border: none;
      border-radius: 8px;
      background: #e74c3c;
      color: white;
      cursor: pointer;
    }
    .home {
      padding: 10px 20px;
      font-size: 16px;
      border: none;
      border-radius: 8px;
      background-color: #e74c3c;
      color: white;
      cursor: pointer;
      transition: 0.3s;
    }
    .btn:hover { background: #c0392b; }
  </style>
</head>

<body>
  <h1>ğŸ° æ•°å­—ã‚¹ãƒ­ãƒƒãƒˆ ğŸ°</h1>

  <div id="slot">
    <div class="reel-container"><div class="reel" id="r1"></div></div>
    <div class="reel-container"><div class="reel" id="r2"></div></div>
    <div class="reel-container"><div class="reel" id="r3"></div></div>
  </div>

<p id="coins">æ®‹ã‚Šã‚³ã‚¤ãƒ³: 0</p>
<p id="result">ã‚³ã‚¤ãƒ³ã‚’å…¥ã‚Œã¦ãã ã•ã„ï¼</p>
<button class="btn" onclick="playSlot()">â–¶ å›ã™</button>

   <button class="home" onclick="location.href='index.html'" style="margin-top:40px;">
    â† ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã¸æˆ»ã‚‹
  </button>
 <script src="coin.js"></script>
<script>
  const numbers = [0,1,2,3,4,5,6,7,8,9];

  // å„ãƒªãƒ¼ãƒ«ã«æ•°å­—ã‚’ä¸¦ã¹ã¦ãŠã
  function setupReels() {
    for (let i=1; i<=3; i++) {
      const reel = document.getElementById("r"+i);
      reel.innerHTML = "";
      for (let j=0; j<30; j++) {
        const d = document.createElement("div");
        d.className = "digit";
        d.textContent = numbers[j % 10];
        reel.appendChild(d);
      }
    }
    updateCoins(); // åˆæœŸè¡¨ç¤º
  }
  setupReels();

  function updateCoins() {
    document.getElementById("coins").textContent = "æ®‹ã‚Šã‚³ã‚¤ãƒ³: " + loadCoins();
  }

  function playSlot() {
    // 1ã‚³ã‚¤ãƒ³æ¶ˆè²»
    if (!spendCoins(1)) {
      document.getElementById("result").textContent = "ğŸ’° ã‚³ã‚¤ãƒ³ãŒè¶³ã‚Šã¾ã›ã‚“ï¼";
      return;
    }
    updateCoins();
    document.getElementById("result").textContent = "å›è»¢ä¸­â€¦";

    for (let i=1; i<=3; i++) {
      const reel = document.getElementById("r"+i);
      const finalNumber = Math.floor(Math.random()*10);
      const offset = -( (20 + finalNumber) * 60 ); 
      setTimeout(()=>{
        reel.style.transition = "transform 1s ease-out";
        reel.style.transform = `translateY(${offset}px)`;
      }, i * 500);
    }

    setTimeout(()=>{
      const results = [];
      for (let i=1; i<=3; i++) {
        const reel = document.getElementById("r"+i);
        const matrix = getComputedStyle(reel).transform;
        const match = matrix.match(/matrix.*\((.+)\)/);
        let ty = 0;
        if (match) ty = parseFloat(match[1].split(",")[5]);
        const index = Math.abs(Math.round(ty / 60)) % 10;
        results.push(index);
      }

      if (results[0]===results[1] && results[1]===results[2]) {
        document.getElementById("result").textContent = `ğŸ‰ å¤§å½“ãŸã‚Šï¼ ${results.join(" ")}`;
        addCoins(10); // å½“ãŸã‚Šã§10ã‚³ã‚¤ãƒ³è¿½åŠ 
      } else {
        document.getElementById("result").textContent = `çµæœ: ${results.join(" ")}`;
      }
      updateCoins();
    }, 2500);
  }
</script>

</body>
</html>
