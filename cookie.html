<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>ã‚¯ãƒƒã‚­ãƒ¼ã‚’ä½œã‚‹ã ã‘ã®ã‚µã‚¤ãƒˆ</title>
  <link rel="icon" type="image/png" href="favicon.png">
  <style>

  </style>
</head>

<body class="default-theme">

  <div id="noticeArea" class="notice">
    update:æ­£å¼ãƒªãƒªãƒ¼ã‚¹
  </div>


<style>
  body {
    background: #f0e6d2;
    font-family: 'Comic Sans MS', cursive;
    text-align: center;
    padding: 20px 10px;
    user-select: none;
  }

  h1 {
    color: #b35c00;
    margin-bottom: 15px;
    font-size: 1.8rem;
    text-shadow: 1.5px 1.5px 3px #d9b382;
  }

  #controls {
    margin-bottom: 15px;
  }
ã€€#saveStatus {
  margin-top: 5px;
  font-size: 0.9rem;
  color: #555;
  transition: color 0.3s;
}


#saveStatus.flash {
  color: #00aa00;
  font-weight: bold;
}


  button {
    padding: 6px 14px;
    margin: 0 6px;
    font-weight: bold;
    border: none;
    border-radius: 6px;
    background: #8b5e00;
    color: #fff;
    cursor: pointer;
    transition: background-color 0.3s;
    font-size: 0.9rem;
  }

      a.btn {
      display: inline-block;
      margin-top: 20px;
      padding: 12px 20px;
      background: #3498db;
      color: white;
      text-decoration: none;
      border-radius: 8px;
      transition: 0.3s;
    }


  button:hover:not(:disabled) {
    background-color: #a47200;
  }

  button:disabled {
    background: #999;
    cursor: not-allowed;
  }

  #cookieWrapper {
    display: inline-block;
    padding: 30px;
    border-radius: 50%;
    margin-bottom: 12px;
  }

  #cookieCanvas {
    border-radius: 50%;
    box-shadow: 0 3px 10px rgba(179, 92, 0, 0.6);
    cursor: pointer;
  }

  #cookieCount {
    font-size: 1.4rem;
    font-weight: bold;
    color: #7a4200;
    text-shadow: 1px 1px 1px #f5d69a;
    margin-bottom: 12px;
  }

  #mainAreas {
    display: flex;
    gap: 12px;
    justify-content: center;
  }

  .area {
    background-color: #d9a441;
    color: #fff;
    border-radius: 10px;
    padding: 10px 14px;
    width: 280px;
    max-height: 350px;
    overflow-y: auto;
    box-shadow: 0 3px 8px rgba(0,0,0,0.2);
  }

  .area h2 {
    margin-top: 0;
    margin-bottom: 8px;
    font-size: 1.2rem;
    text-shadow: 1px 1px 2px #996800;
  }

  .facility {
    background-color: #b67f0a;
    margin-bottom: 8px;
    padding: 8px 10px;
    border-radius: 8px;
    font-size: 0.9rem;
    text-align: left;
  }

  .facility button {
    float: right;
    padding: 4px 10px;
    font-size: 0.85rem;
  }

  .clear { clear: both; }

  .skill, .achievement {
    background: #ffe6b3;
    color: #6b3f00;
    margin-bottom: 8px;
    padding: 8px 10px;
    border-radius: 8px;
    font-size: 0.9rem;
    text-align: left;
  }

  .skill button {
    float: right;
    padding: 4px 10px;
    font-size: 0.85rem;
  }

  .achievement.unlocked {
    background: #ffd700;
    color: #000;
    font-weight: bold;
  }

  .pop {
    animation: popAnim 0.3s forwards;
  }

  @keyframes popAnim {
    0%   { transform: scale(1); }
    50%  { transform: scale(1.15); }
    100% { transform: scale(1); }
  }
  /* ãƒ†ãƒ¼ãƒåˆ‡ã‚Šæ›¿ãˆç”¨ã®CSSå¤‰æ•° */
  :root {
    --bg-color: #f0e6d2;
    --font-color: #7a4200;
    --button-bg: #8b5e00;
  }

  body.default-theme {
    --bg-color: #f0e6d2;
    --font-color: #7a4200;
    --button-bg: #8b5e00;
  }

  body.space-theme {
    --bg-color: #000010;
    --font-color: #00ffff;
    --button-bg: #003366;
  }

  body {
    background-color: var(--bg-color);
    color: var(--font-color);
  }

  button {
    background-color: var(--button-bg);
  }
</style>
</head>
<body class="default-theme">

<h1>ã‚¯ãƒƒã‚­ãƒ¼ã‚’ã‚¯ãƒªãƒƒã‚¯ï¼</h1>
    <div id="noticeArea" class="notice">
ã€€ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆå†…å®¹ãŒè¡¨ç¤ºã•ã‚Œãªã„å ´åˆã¯å†ç”Ÿã‚’ã—ã¦ãã ã•ã„
 <div>       

<div id="controls">
  <button id="resetBtn" onclick="resetGame()">ğŸ”„ å†ç”Ÿï¼ˆãƒªã‚»ãƒƒãƒˆï¼‰</button>
  <button onclick="hardReset()">ğŸ—‘ï¸ ãƒ‡ãƒ¼ã‚¿å®Œå…¨å‰Šé™¤</button>
    <button id="stormBtn" onclick="startCookieStorm()">âš¡ã‚¯ãƒƒã‚­ãƒ¼ãƒ–ãƒ¼ã‚¹ãƒˆç™ºå‹•âš¡</button>\
  <a href="index.html" class="startCookieStorm">â¬… ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã¸æˆ»ã‚‹</a>
 

  <!-- ã‚¯ãƒƒã‚­ãƒ¼ç€ã›æ›¿ãˆ -->
  <select id="cookieStyleSelector" onchange="changeCookieStyle(this.value)">
    <option value="default">ğŸª ãƒãƒ¼ãƒãƒ«</option>
    <option value="choco">ğŸ« ãƒãƒ§ã‚³</option>
    <option value="strawberry">ğŸ“ ã„ã¡ã”</option>
  </select>
</div>



<div id="cookieWrapper">
  <canvas id="cookieCanvas" width="220" height="220"></canvas>
</div>

<div id="cookieCount">ã‚¯ãƒƒã‚­ãƒ¼: 0</div>
<div id="saveStatus">ğŸ’¾ ã‚»ãƒ¼ãƒ–å¾…æ©Ÿä¸­...</div>


<div id="mainAreas">
  <div class="area" id="shopArea">
    <h2>ğŸ­ æ–½è¨­</h2>
  </div>
  <div class="area" id="skillArea">
    <h2>ğŸ§ª ã‚¹ã‚­ãƒ«ãƒ„ãƒªãƒ¼</h2>
  </div>
  <div class="area" id="achievementArea">
    <h2>ğŸ† ç§°å·</h2>
  </div>

<script>
const canvas = document.getElementById('cookieCanvas');
const ctx = canvas.getContext('2d');
const countElem = document.getElementById('cookieCount');
const shopArea = document.getElementById('shopArea');
const skillArea = document.getElementById('skillArea');
const achievementArea = document.getElementById('achievementArea');

let cookieCount = 0;
const baseClickValue = 1;
let cookieStyle = "default";  // ã‚¯ãƒƒã‚­ãƒ¼ã®ã‚¹ã‚¿ã‚¤ãƒ«
let clickValue = baseClickValue;

let basePassiveBonus = 0;
let passiveBonus = basePassiveBonus;

let prestige = 0;

// â†“ã“ã“ã«è¿½åŠ 
let cookieStormActive = false;
let cookieStormTimer = 0;
let cookieStormCooldown = 0;


const facilities = [
  { name: "æ‰‹å›ã—æ©Ÿ", baseCost: 10, cps: 1, baseCps: 1, count: 0, cost: 10 },
  { name: "ã‚ªãƒ¼ãƒ–ãƒ³", baseCost: 50, cps: 5, baseCps: 5, count: 0, cost: 50 },
  { name: "ã‚¯ãƒƒã‚­ãƒ¼å·¥å ´", baseCost: 100, cps: 10, baseCps: 10, count: 0, cost: 100 },
  { name: "AIã‚¯ãƒƒã‚­ãƒ¼ãƒã‚·ãƒ³", baseCost: 1000, cps: 50, baseCps: 50, count: 0, cost: 1000 },
  { name: "ã‚¯ãƒƒã‚­ãƒ¼æ˜ŸåŸºåœ°", baseCost: 5000, cps: 100, baseCps: 100, count: 0, cost: 5000 },
  { name: "æ™‚é–“æ“ä½œè£…ç½®", baseCost: 20000, cps: 300, baseCps: 300, count: 0, cost: 20000 },
  { name: "ç©ºé£›ã¶å·¥å ´", baseCost: 50000, cps: 600, baseCps: 600, count: 0, cost: 50000 },
  { name: "æ™‚ç©ºç ”ç©¶æ‰€", baseCost: 200000, cps: 1000, baseCps: 1000, count: 0, cost: 200000 },
  { name: "è¶…æ¬¡å…ƒç²¾è£½æ©Ÿ", baseCost: 1000000, cps: 5000, baseCps: 5000, count: 0, cost: 1000000 },
  { name: "ã‚¯ãƒƒã‚­ãƒ¼ãƒ—ãƒ©ã‚ºãƒç‚‰", baseCost: 5000000, cps: 20000, baseCps: 20000, count: 0, cost: 5000000 },
  { name: "å®‡å®™ã‚¯ãƒƒã‚­ãƒ¼é€£ç›Ÿ", baseCost: 20000000, cps: 60000, baseCps: 60000, count: 0, cost: 20000000 },
  { name: "ç¥è–ãªã‚‹ç„¼æˆç¥æ®¿", baseCost: 100000000, cps: 200000, baseCps: 200000, count: 0, cost: 100000000 },
  { name: "å…¨èƒ½ã®ã‚¯ãƒƒã‚­ãƒ¼AI", baseCost: 500000000, cps: 500000, baseCps: 500000, count: 0, cost: 500000000 },
  { name: "ã‚¯ãƒƒã‚­ãƒ¼å¤šå…ƒå®‡å®™æ©Ÿ", baseCost: 2000000000, cps: 1200000, baseCps: 1200000, count: 0, cost: 2000000000 },
  { name: "ã‚¯ãƒƒã‚­ãƒ¼æ™‚é–“ãƒ«ãƒ¼ãƒ—ç‚‰", baseCost: 10000000000, cps: 5000000, baseCps: 5000000, count: 0, cost: 10000000000 },
  { name: "âˆã‚¯ãƒƒã‚­ãƒ¼ç”Ÿæˆè£…ç½®", baseCost: 50000000000, cps: 10000000, baseCps: 10000000, count: 0, cost: 50000000000 },
  { name: "ã‚¯ãƒƒã‚­ãƒ¼é­”å°æ›¸", baseCost: 100000, cps: 50, baseCps: 50, count: 0, cost: 100000 },
  { name: "ã‚¯ãƒƒã‚­ãƒ¼è¾²åœ’", baseCost: 7000, cps: 300, baseCps: 300, count: 0, cost: 7000 },
  { name: "ã‚¯ãƒƒã‚­ãƒ¼çˆ†å¼¾å·¥å ´", baseCost: 2000000, cps: 0, baseCps: 0, count: 0, cost: 2000000, special: "ä¸€å®šæ™‚é–“ç”Ÿç”£é‡2å€ã®ãƒœãƒ¼ãƒŠã‚¹ç™ºå‹•å¯èƒ½" },
  { name: "ã‚¯ãƒƒã‚­ãƒ¼ãƒ­ãƒœãƒƒãƒˆè»å›£", baseCost: 30000000, cps: 0, baseCps: 0, count: 0, cost: 30000000, special: "å…¨æ–½è¨­ã®ç”Ÿç”£é€Ÿåº¦5%ã‚¢ãƒƒãƒ—ï¼ˆãƒ‘ãƒƒã‚·ãƒ–ï¼‰" },
{ name: "æ¬¡å…ƒã‚¯ãƒƒã‚­ãƒ¼åœ§ç¸®ç‚‰",       baseCost: 10000000,       cps: 30000,     baseCps: 30000,     count: 0, cost: 10000000 },
{ name: "è¶…é‡åŠ›ç„¼æˆå®¤",             baseCost: 50000000,       cps: 100000,    baseCps: 100000,    count: 0, cost: 50000000 },
{ name: "ã‚¯ãƒƒã‚­ãƒ¼ç‰©è³ªå¤‰æ›è£…ç½®",     baseCost: 200000000,      cps: 300000,    baseCps: 300000,    count: 0, cost: 200000000 },
{ name: "å¤šæ¬¡å…ƒã‚¯ãƒƒã‚­ãƒ¼æ’¹æ‹Œç‚‰",     baseCost: 800000000,      cps: 800000,    baseCps: 800000,    count: 0, cost: 800000000 },
{ name: "éŠ€æ²³ç³»ç„¼æˆç‚‰",             baseCost: 3000000000,     cps: 2000000,   baseCps: 2000000,   count: 0, cost: 3000000000 },
{ name: "ã‚¯ãƒƒã‚­ãƒ¼æ™‚é–“ãƒ«ãƒ¼ãƒ—ç‚‰",     baseCost: 10000000000,    cps: 5000000,   baseCps: 5000000,   count: 0, cost: 10000000000 },
{ name: "è™šç„¡ã‚¯ãƒƒã‚­ãƒ¼å·¥æˆ¿",         baseCost: 30000000000,    cps: 12000000,  baseCps: 12000000,  count: 0, cost: 30000000000 },
{ name: "å…‰é€Ÿç„¼æˆãƒ©ã‚¤ãƒ³",           baseCost: 80000000000,    cps: 30000000,  baseCps: 30000000,  count: 0, cost: 80000000000 },
{ name: "é‡å­ã‚¯ãƒƒã‚­ãƒ¼è£½é€ å™¨",       baseCost: 200000000000,   cps: 75000000,  baseCps: 75000000,  count: 0, cost: 200000000000 },
{ name: "ãƒ–ãƒ©ãƒƒã‚¯ãƒ›ãƒ¼ãƒ«ç‚‰",         baseCost: 500000000000,   cps: 150000000, baseCps: 150000000, count: 0, cost: 500000000000 },
{ name: "ç¥ã€…ã®ã‚¯ãƒƒã‚­ãƒ¼ãƒãƒ³ãƒãƒ¼",   baseCost: 1000000000000,  cps: 300000000, baseCps: 300000000, count: 0, cost: 1000000000000 },
{ name: "è¶…éŠ€æ²³ç„¼æˆè¤‡åˆä½“",         baseCost: 3000000000000,  cps: 700000000, baseCps: 700000000, count: 0, cost: 3000000000000 },
{ name: "æ™‚é–“å‡çµç‚‰",               baseCost: 8000000000000,  cps: 1500000000,baseCps: 1500000000,count: 0, cost: 8000000000000 },
{ name: "ãƒãƒ«ãƒå®‡å®™ã‚¯ãƒƒã‚­ãƒ¼å ´",     baseCost: 20000000000000, cps: 3000000000,baseCps: 3000000000,count: 0, cost: 20000000000000 },
{ name: "AIç¥ã‚¯ãƒƒã‚­ãƒ¼è¨­è¨ˆæ‰€",       baseCost: 50000000000000, cps: 7000000000,baseCps: 7000000000,count: 0, cost: 50000000000000 },
{ name: "âˆã‚¯ãƒƒã‚­ãƒ¼ç”Ÿæˆè£…ç½®MK-II",   baseCost: 100000000000000,cps: 15000000000,baseCps: 15000000000,count: 0, cost: 100000000000000 },
{ name: "ç©¶æ¥µã‚¯ãƒƒã‚­ãƒ¼è¶…èåˆç‚‰",     baseCost: 300000000000000,cps: 35000000000,baseCps: 35000000000,count: 0, cost: 300000000000000 },
{ name: "é‹å‘½æ›¸ãæ›ãˆã‚¯ãƒƒã‚­ãƒ¼ãƒã‚·ãƒ³", baseCost: 800000000000000,cps: 80000000000,baseCps: 80000000000,count: 0, cost: 800000000000000 },
{ name: "ç¥æ€§ç„¼æˆè¨˜æ†¶è£…ç½®",         baseCost: 2000000000000000,cps: 200000000000,baseCps: 200000000000,count: 0, cost: 2000000000000000 },
{ name: "å®‡å®™ã®æœã¦ã®ã‚¯ãƒƒã‚­ãƒ¼å¡”",   baseCost: 9999999999999999,cps: 999999999999,cost: 9999999999999999, baseCps: 999999999999, count: 0 },
{ name: "ç¥",   baseCost: 10000000000000000000000000000000000000000,cps: 999999999999999999999,cost: 10000000000000000000000000000000000000000, baseCps: 999999999999999999999, count: 0 },
{ name: "ç„¡ã®å¢ƒåœ°ã‚¯ãƒƒã‚­ãƒ¼ç‚‰", baseCost: 5e16, cps: 5e11, baseCps: 5e11, count: 0, cost: 5e16 },
{ name: "å¹»æƒ³ã‚¯ãƒƒã‚­ãƒ¼å‰µé€ æ©Ÿ", baseCost: 2e17, cps: 1.5e12, baseCps: 1.5e12, count: 0, cost: 2e17 },
{ name: "è¶…ç„¡é™ã‚¯ãƒƒã‚­ãƒ¼AIç¥æ®¿", baseCost: 1e68, cps: 5e32, baseCps: 5e32, count: 0, cost: 1e68 },


];


const skills = [
  {
    id: "boostClick",
    name: "å¼·åŒ–ã‚¯ãƒªãƒƒã‚¯",
    desc: "ã‚¯ãƒªãƒƒã‚¯ãŒ10ã«ãªã‚‹",
    condition: () => cookieCount >= 100,
    apply: () => { clickValue += 9; },
    unlocked: false
  },
  {
    id: "boostFactory",
    name: "ç”Ÿç”£å¼·åŒ–",
    desc: "ã‚ªãƒ¼ãƒ–ãƒ³ã®ç”Ÿç”£é‡ãŒ2å€ã«ãªã‚‹",
    condition: () => facilities[1]?.count >= 10,
    apply: () => { facilities[1].cps = facilities[1].baseCps * 2; },
    unlocked: false
  },
  {
    id: "boostAI",
    name: "å·¥å ´å¼·åŒ–",
    desc: "ã‚¯ãƒƒã‚­ãƒ¼å·¥å ´ã®ç”Ÿç”£é‡ãŒ30%å¢—åŠ ",
    condition: () => facilities[2]?.count >= 3,
    apply: () => { facilities[2].cps = facilities[2].baseCps * 1.3; },
    unlocked: false
  },
  {
    id: "passiveGold",
    name: "é»„é‡‘ã®æ‰‹ï¼ˆãƒ‘ãƒƒã‚·ãƒ–ï¼‰",
    desc: "å¸¸ã«+1ã‚¯ãƒƒã‚­ãƒ¼/ç§’ï¼ˆè‡ªå‹•ï¼‰",
    condition: () => cookieCount >= 1000,
    apply: () => { basePassiveBonus += 1; },
    unlocked: false
  },
  {
    id: "boostFlying",
    name: "ç©ºé£›ã¶å¼·åŒ–",
    desc: "ç©ºé£›ã¶å·¥å ´ã®ç”Ÿç”£é‡ãŒ2å€ã«ãªã‚‹",
    condition: () => facilities[5]?.count >= 5,
    apply: () => { facilities[5].cps = facilities[5].baseCps * 2; },
    unlocked: false
  },
  {
    id: "boostTimeLab",
    name: "æ™‚ç©ºå¼·åŒ–",
    desc: "æ™‚ç©ºç ”ç©¶æ‰€ã®ç”Ÿç”£é‡ãŒ1.5å€ã«ãªã‚‹",
    condition: () => facilities[6]?.count >= 3,
    apply: () => { facilities[6].cps = facilities[6].baseCps * 1.5; },
    unlocked: false
  },
  {
    id: "boostPlasma",
    name: "ãƒ—ãƒ©ã‚ºãƒè¦šé†’",
    desc: "ã‚¯ãƒƒã‚­ãƒ¼ãƒ—ãƒ©ã‚ºãƒç‚‰ã®ç”Ÿç”£é‡ãŒ2å€ã«ãªã‚‹",
    condition: () => facilities[8]?.count >= 3,
    apply: () => { facilities[8].cps = facilities[8].baseCps * 2; },
    unlocked: false
  },
  {
    id: "blessingTemple",
    name: "ç¥æ®¿ã®ç¥ç¦",
    desc: "+10000ã‚¯ãƒƒã‚­ãƒ¼/ç§’ã®ãƒ‘ãƒƒã‚·ãƒ–ã‚’å¾—ã‚‹",
    condition: () => facilities[10]?.count >= 1,
    apply: () => { basePassiveBonus += 10000; },
    unlocked: false
  },
  {
    id: "infiniteBoost",
    name: "âˆãƒ–ãƒ¼ã‚¹ãƒˆ",
    desc: "âˆã‚¯ãƒƒã‚­ãƒ¼ç”Ÿæˆè£…ç½®ã®ç”Ÿç”£é‡ãŒ3å€ã«ãªã‚‹",
    condition: () => facilities[14]?.count >= 1,
    apply: () => { facilities[14].cps = facilities[14].baseCps * 3; },
    unlocked: false
   },
  {
  id: "beyondInfinity",
  name: "è¶…è¶Šã®åŠ›",
  desc: "å…¨æ–½è¨­ã®ç”Ÿç”£é‡ãŒ50%ã‚¢ãƒƒãƒ—",
  condition: () => cookieCount >= 1e17,
  apply: () => {
    facilities.forEach(f => f.cps = f.baseCps * 1.5);
  },
  unlocked: false
},
{
  id: "clickInfinity",
  name: "ã‚¤ãƒ³ãƒ•ã‚£ãƒ‹ãƒ†ã‚£ã‚¯ãƒªãƒƒã‚¯",
  desc: "ã‚¯ãƒªãƒƒã‚¯ã§+10å„„ã‚¯ãƒƒã‚­ãƒ¼ç²å¾—",
  condition: () => cookieCount >= 5e16,
  apply: () => { clickValue += 1e9; },
  unlocked: false
},
{
  id: "voidPassive",
  name: "è™šç„¡ã®è‡ªå‹•ç”Ÿæˆ",
  desc: "å¸¸ã«+1å…†ã‚¯ãƒƒã‚­ãƒ¼/ç§’ã‚’å¾—ã‚‹",
  condition: () => facilities[facilities.length - 1]?.count >= 1,
  apply: () => { basePassiveBonus += 1e12; },
  unlocked: false


  },

  // è¿½åŠ ã‚¹ã‚­ãƒ«å¤šæ•°

  {
    id: "superClick",
    name: "è¶…å¼·åŒ–ã‚¯ãƒªãƒƒã‚¯",
    desc: "ã‚¯ãƒªãƒƒã‚¯ã§ã•ã‚‰ã«+10å¢—ãˆã‚‹",
    condition: () => cookieCount >= 10000,
    apply: () => { clickValue += 10; },
    unlocked: false
  },
  {
    id: "factoryMaster",
    name: "å·¥å ´ãƒã‚¹ã‚¿ãƒ¼",
    desc: "å…¨ã¦ã®æ–½è¨­ã®ç”Ÿç”£é‡ãŒ10%ã‚¢ãƒƒãƒ—",
    condition: () => facilities.reduce((acc, f) => acc + f.count, 0) >= 50,
    apply: () => {
      facilities.forEach(f => {
        f.cps = f.baseCps * 1.1;
      });
    },
    unlocked: false
  },
  {
    id: "passiveBoost",
    name: "ãƒ‘ãƒƒã‚·ãƒ–ãƒ–ãƒ¼ã‚¹ãƒˆ",
    desc: "ãƒ‘ãƒƒã‚·ãƒ–ãƒœãƒ¼ãƒŠã‚¹ãŒ+100å¢—åŠ ",
    condition: () => cookieCount >= 50000,
    apply: () => { basePassiveBonus += 100; },
    unlocked: false
  },
  {
    id: "clickCombo",
    name: "ã‚¯ãƒªãƒƒã‚¯ã‚³ãƒ³ãƒœ",
    desc: "é€£ç¶šã‚¯ãƒªãƒƒã‚¯ã§ãƒœãƒ¼ãƒŠã‚¹ã‚¯ãƒƒã‚­ãƒ¼ç²å¾—",
    condition: () => clickValue >= 20,
    apply: () => { /* ä»»æ„ã®å‡¦ç†ã‚’å¾Œã§å®Ÿè£…å¯èƒ½ */ },
    unlocked: false
  },
  {
    id: "ultimateSpeed",
    name: "ç©¶æ¥µã®é€Ÿã•",
    desc: "æ–½è¨­è³¼å…¥æ™‚ã®ã‚³ã‚¹ãƒˆä¸Šæ˜‡ãŒ10%æ¸›å°‘",
    condition: () => prestige >= 10,
    apply: () => { /* ã‚³ã‚¹ãƒˆä¸Šæ˜‡æŠ‘åˆ¶ã‚’ã‚²ãƒ¼ãƒ ãƒ«ãƒ¼ãƒ—ã«å®Ÿè£…ã™ã‚‹å¿…è¦ã‚ã‚Š */ },
    unlocked: false
  },
  {
    id: "megaClick",
    name: "ãƒ¡ã‚¬ã‚¯ãƒªãƒƒã‚¯",
    desc: "ã‚¯ãƒªãƒƒã‚¯ã§+50å¢—ãˆã‚‹",
    condition: () => cookieCount >= 500000,
    apply: () => { clickValue += 50; },
    unlocked: false
  },
  {
    id: "hyperFactory",
    name: "ãƒã‚¤ãƒ‘ãƒ¼ãƒ•ã‚¡ã‚¯ãƒˆãƒªãƒ¼",
    desc: "å…¨æ–½è¨­ã®ç”Ÿç”£é‡ãŒ20%ã‚¢ãƒƒãƒ—",
    condition: () => facilities.reduce((acc, f) => acc + f.count, 0) >= 200,
    apply: () => {
      facilities.forEach(f => {
        f.cps = f.baseCps * 1.2;
      });
    },
    unlocked: false
  },
  {
    id: "goldenTouch",
    name: "é»„é‡‘ã®ã‚¿ãƒƒãƒ",
    desc: "ã‚¯ãƒªãƒƒã‚¯æ™‚ã«1%ã®ç¢ºç‡ã§1000ã‚¯ãƒƒã‚­ãƒ¼ç²å¾—",
    condition: () => cookieCount >= 100000,
    apply: () => { /* ã‚¤ãƒ™ãƒ³ãƒˆå‡¦ç†ã¯ã‚¯ãƒªãƒƒã‚¯æ™‚ã«å®Ÿè£… */ },
    unlocked: false
  },
  {
    id: "timeWarp",
    name: "ã‚¿ã‚¤ãƒ ãƒ¯ãƒ¼ãƒ—",
    desc: "1ç§’ã”ã¨ã«ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ã‚’+1ç²å¾—",
    condition: () => prestige >= 5,
    apply: () => { /* ã‚²ãƒ¼ãƒ ãƒ«ãƒ¼ãƒ—ã§å¢—åŠ å‡¦ç†ã‚’å®Ÿè£… */ },
    unlocked: false
  },
  {
    id: "cookieStorm",
    name: "ã‚¯ãƒƒã‚­ãƒ¼ã‚¹ãƒˆãƒ¼ãƒ ",
    desc: "10ç§’é–“ã‚¯ãƒƒã‚­ãƒ¼ç”Ÿç”£é‡ãŒ3å€ã«ãªã‚‹ï¼ˆã‚¯ãƒ¼ãƒ«ãƒ€ã‚¦ãƒ³ã‚ã‚Šï¼‰",
    condition: () => cookieCount >= 1000000,
    apply: () => { /* ã‚¹ã‚­ãƒ«ç™ºå‹•ãƒ­ã‚¸ãƒƒã‚¯ã‚’åˆ¥é€”å®Ÿè£… */ },
    unlocked: false
  },
  {
    id: "factoryOverdrive",
    name: "å·¥å ´ã‚ªãƒ¼ãƒãƒ¼ãƒ‰ãƒ©ã‚¤ãƒ–",
    desc: "å…¨æ–½è¨­ã®ç”Ÿç”£é‡ãŒ50%ã‚¢ãƒƒãƒ—ï¼ˆ30ç§’é–“ï¼‰",
    condition: () => facilities[2].count >= 20,
    apply: () => { /* ä¸€æ™‚çš„ãƒãƒ•ã®ç®¡ç†ãŒå¿…è¦ */ },
    unlocked: false
  },
  {
    id: "legacyBoost",
    name: "éºç”£ã®ãƒ–ãƒ¼ã‚¹ãƒˆ",
    desc: "ãƒªã‚»ãƒƒãƒˆæ™‚ã«ç²å¾—ã™ã‚‹ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ãŒ2å€ã«ãªã‚‹",
    condition: () => prestige >= 20,
    apply: () => { /* ãƒªã‚»ãƒƒãƒˆæ™‚ã®è¨ˆç®—ã‚’ä¿®æ­£ */ },
    unlocked: false
  },
  {
    id: "autoBuyer",
    name: "è‡ªå‹•è³¼å…¥ã‚·ã‚¹ãƒ†ãƒ ",
    desc: "ä¸€å®šé–“éš”ã§æ–½è¨­ã‚’è‡ªå‹•è³¼å…¥ï¼ˆè³¼å…¥å¯èƒ½ãªã‚‰ï¼‰",
    condition: () => cookieCount >= 10000000,
    apply: () => { /* è‡ªå‹•è³¼å…¥ã®å®Ÿè£…ãŒå¿…è¦ */ },
    unlocked: false
  },
  {
    id: "skillMastery",
    name: "ã‚¹ã‚­ãƒ«ãƒã‚¹ã‚¿ãƒªãƒ¼",
    desc: "å…¨ã‚¹ã‚­ãƒ«ã®åŠ¹æœãŒ20%ã‚¢ãƒƒãƒ—",
    condition: () => skills.every(s => s.unlocked),
    apply: () => {
      // ã‚¹ã‚­ãƒ«åŠ¹æœã‚’ä¹—ç®—ã§å¼·åŒ–ã™ã‚‹ãƒ­ã‚¸ãƒƒã‚¯ã‚’åˆ¥é€”å®Ÿè£…
    },
    unlocked: false
  },
{
  id: "fastProduction",
  name: "é«˜é€Ÿç”Ÿç”£",
  desc: "å…¨ã¦ã®æ–½è¨­ã®ç”Ÿç”£é€Ÿåº¦ãŒ1.5å€ã«ãªã‚‹",
  condition: () => facilities.reduce((acc, f) => acc + f.count, 0) >= 30,
  apply: () => {
    facilities.forEach(f => {
      f.cps = f.baseCps * 1.5;
    });
  },
  unlocked: false
},
{
  id: "clickMania",
  name: "ã‚¯ãƒªãƒƒã‚¯ãƒãƒ‹ã‚¢",
  desc: "ã‚¯ãƒªãƒƒã‚¯æ™‚ã®ã‚¯ãƒƒã‚­ãƒ¼ç²å¾—é‡ãŒ+20å¢—ãˆã‚‹",
  condition: () => cookieCount >= 20000,
  apply: () => { clickValue += 20; },
  unlocked: false
},
{
  id: "passiveMaster2",
  name: "ãƒ‘ãƒƒã‚·ãƒ–ã®é”äºº2",
  desc: "ãƒ‘ãƒƒã‚·ãƒ–ãƒœãƒ¼ãƒŠã‚¹ãŒ+500å¢—ãˆã‚‹",
  condition: () => prestige >= 20,
  apply: () => { basePassiveBonus += 500; },
  unlocked: false
}

];

 const achievements = [
  // â˜…ä½é›£æ˜“åº¦ï¼ˆåˆæœŸï½100ä¸‡ã‚¯ãƒƒã‚­ãƒ¼ã‚ãŸã‚Šï¼‰
  { id: "firstClick", name: "åˆã‚¯ãƒªãƒƒã‚¯", condition: () => cookieCount >= 1, unlocked: false },
  { id: "hundredCookies", name: "100ã‚¯ãƒƒã‚­ãƒ¼", condition: () => cookieCount >= 100, unlocked: false },
  { id: "thousandCookies", name: "1000ã‚¯ãƒƒã‚­ãƒ¼", condition: () => cookieCount >= 1000, unlocked: false },
  { id: "tenThousandCookies", name: "1ä¸‡ã‚¯ãƒƒã‚­ãƒ¼", condition: () => cookieCount >= 10000, unlocked: false },
  { id: "hundredThousandCookies", name: "10ä¸‡ã‚¯ãƒƒã‚­ãƒ¼", condition: () => cookieCount >= 100000, unlocked: false },
  { id: "millionCookies", name: "100ä¸‡ã‚¯ãƒƒã‚­ãƒ¼", condition: () => cookieCount >= 1000000, unlocked: false },
  { id: "speedClicker", name: "é«˜é€Ÿã‚¯ãƒªãƒƒã‚¯", condition: () => clickValue >= 10, unlocked: false },
  { id: "factoryOwner", name: "å·¥å ´ä¸»", condition: () => facilities[1].count >= 10, unlocked: false },
  { id: "megaFactory", name: "ãƒ¡ã‚¬å·¥å ´ä¸»", condition: () => facilities[1].count >= 50, unlocked: false },

  // â˜…ä¸­é›£æ˜“åº¦ï¼ˆ100ä¸‡ï½10å„„ã‚¯ãƒƒã‚­ãƒ¼ã€æ–½è¨­100å€‹ï½300å€‹ã‚ãŸã‚Šï¼‰
  { id: "ultimateFactoryOwner", name: "ç©¶æ¥µã®å·¥å ´ä¸»", condition: () => facilities.reduce((acc, f) => acc + f.count, 0) >= 100, unlocked: false },
  { id: "clickMaster", name: "ã‚¯ãƒªãƒƒã‚¯ãƒã‚¹ã‚¿ãƒ¼", condition: () => clickValue >= 30, unlocked: false },
  { id: "achievementHunter", name: "ç§°å·ãƒãƒ³ã‚¿ãƒ¼", condition: () => achievements.filter(a => a.unlocked).length >= 10, unlocked: false },
  { id: "passivePro", name: "ãƒ‘ãƒƒã‚·ãƒ–ã®é”äºº", condition: () => basePassiveBonus >= 1000, unlocked: false },
  { id: "goldenHand", name: "é»„é‡‘ã®æ‰‹", condition: () => basePassiveBonus >= 10000, unlocked: false },
  { id: "spaceColonist", name: "å®‡å®™å…¥æ¤è€…", condition: () => facilities[4].count >= 5, unlocked: false },
  { id: "timeTraveler", name: "æ™‚é–“æ—…è¡Œè€…", condition: () => facilities[5].count >= 10, unlocked: false },
  { id: "plasmaMaster", name: "ãƒ—ãƒ©ã‚ºãƒã®é”äºº", condition: () => facilities[9].count >= 7, unlocked: false },
  { id: "spaceExplorer", name: "å®‡å®™æ¢æ¤œå®¶", condition: () => facilities[10].count >= 5, unlocked: false },
  { id: "skillCollectorPro", name: "ã‚¹ã‚­ãƒ«åé›†å®¶", condition: () => skills.filter(s => s.unlocked).length >= 10, unlocked: false },
  { id: "ultimateClicker", name: "ç©¶æ¥µã®ã‚¯ãƒªãƒƒã‚¯è·äºº", condition: () => clickValue >= 100, unlocked: false },
  { id: "ultimateCollector", name: "ç©¶æ¥µã®åé›†è€…", condition: () => facilities.every(f => f.count >= 1), unlocked: false },
  { id: "stormRider", name: "ã‚¹ãƒˆãƒ¼ãƒ ãƒ©ã‚¤ãƒ€ãƒ¼", condition: () => cookieStormCooldown > 0, unlocked: false },
  { id: "factoryGiant", name: "å·¥å ´å·¨äºº", condition: () => facilities.reduce((acc, f) => acc + f.count, 0) >= 300, unlocked: false },

  // â˜…é«˜é›£æ˜“åº¦ï¼ˆå…†ï½å“ã‚¯ãƒƒã‚­ãƒ¼ã€æ–½è¨­æ•°1000ä»¥ä¸Šï¼‰
  { id: "beyondTrillion", name: "å…†ã®ãã®å…ˆã¸", condition: () => cookieCount >= 1e15, unlocked: false },
  { id: "facilityMaster", name: "æ–½è¨­ã®ç¥", condition: () => facilities.reduce((a, f) => a + f.count, 0) >= 1000, unlocked: false },
  { id: "cookieGod", name: "ã‚¯ãƒƒã‚­ãƒ¼ç¥", condition: () => cookieCount >= 1e18, unlocked: false },

  // â˜…æœ€çµ‚é›£æ˜“åº¦ï¼ˆã™ã¹ã¦ã®ç§°å·è§£é™¤ï¼‰
  { id: "skillCollector", name: "ã‚¹ã‚­ãƒ«ãƒã‚¹ã‚¿ãƒ¼", condition: () => skills.every(s => s.unlocked), unlocked: false },
  { id: "allAchievements", name: "ä¼èª¬ã®ç§°å·è€…", condition: () => achievements.every(a => a.unlocked || a.id === "allAchievements"), unlocked: false }


];


function drawCookie() {
  const centerX = canvas.width / 2;
  const centerY = canvas.height / 2;
  const radius = 90;

  const gradient = ctx.createRadialGradient(centerX, centerY, radius * 0.1, centerX, centerY, radius);
  if (cookieStyle === "choco") {
    gradient.addColorStop(0, '#d2691e');
    gradient.addColorStop(1, '#8b4513');
  } else if (cookieStyle === "strawberry") {
    gradient.addColorStop(0, '#ffc0cb');
    gradient.addColorStop(1, '#ff69b4');
  } else {
    gradient.addColorStop(0, '#f8d68a');
    gradient.addColorStop(1, '#c9963c');
  }

  ctx.fillStyle = gradient;
  ctx.beginPath();
  ctx.arc(centerX, centerY, radius, 0, Math.PI * 2);
  ctx.fill();

  for (let i = 0; i < 12; i++) {
    const angle = Math.random() * Math.PI * 2;
    const dist = Math.random() * 70;
    const x = centerX + dist * Math.cos(angle);
    const y = centerY + dist * Math.sin(angle);
    ctx.fillStyle = '#3b1e0f';
    ctx.beginPath();
    ctx.ellipse(x, y, 8, 5, Math.random() * 0.5, 0, Math.PI * 2);
    ctx.fill();
  }
}

drawCookie();

canvas.addEventListener('click', (e) => {
  const rect = canvas.getBoundingClientRect();
  const x = e.clientX - rect.left;
  const y = e.clientY - rect.top;
  const dx = x - canvas.width / 2;
  const dy = y - canvas.height / 2;
  if (Math.sqrt(dx*dx + dy*dy) <= 90) {
    cookieCount += clickValue + prestige; // ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ã‚‚ã‚¯ãƒªãƒƒã‚¯ã«åæ˜ 
    canvas.classList.remove('pop');
    void canvas.offsetWidth;
    canvas.classList.add('pop');
    updateUI();
    saveGame();
  }
});

function updateUI() {
  countElem.textContent = `ã‚¯ãƒƒã‚­ãƒ¼: ${formatNumber(Math.floor(cookieCount))}`;

shopArea.innerHTML = '<h2>ğŸ­ æ–½è¨­</h2>';

const sortedFacilities = [...facilities].sort((a, b) => a.cost - b.cost);

sortedFacilities.forEach((f) => {
  const div = document.createElement('div');
  div.className = 'facility';
  div.innerHTML = `
    <strong>${f.name}</strong><br>
    æ‰€æœ‰: ${f.count}ï½œç”Ÿç”£: ${formatNumber(Math.floor(f.count * f.cps))}/ç§’
    <button ${cookieCount < f.cost ? "disabled" : ""} onclick="buyFacilityByName('${f.name}')">è³¼å…¥ (${formatNumber(f.cost)})</button>
    <div class="clear"></div>
  `;
  shopArea.appendChild(div);
});


  renderSkills();
  renderAchievements();
}

function buyFacility(i) {
  const f = facilities[i];
  if (cookieCount >= f.cost) {
    cookieCount -= f.cost;
    f.count++;
    f.cost = Math.floor(f.cost * 1.2);
    updateUI();
    saveGame();
  }
}

function renderSkills() {
  skillArea.innerHTML = "<h2>ğŸ§ª ã‚¹ã‚­ãƒ«ãƒ„ãƒªãƒ¼</h2>";
  skills.forEach(skill => {
    const div = document.createElement('div');
    div.className = 'skill';
    div.innerHTML = `<strong>${skill.name}</strong><br>${skill.desc}`;
    if (skill.unlocked) {
      div.innerHTML += " âœ… è§£æ”¾æ¸ˆ";
    } else if (skill.condition()) {
      const btn = document.createElement('button');
      btn.textContent = "è§£æ”¾";
      btn.onclick = () => unlockSkill(skill.id);
      div.appendChild(btn);
    } else {
      div.innerHTML += " ğŸ”’ æ¡ä»¶æœªé”æˆ";
    }
    skillArea.appendChild(div);
  });
}

function unlockSkill(id) {
  const skill = skills.find(s => s.id === id);
  if (skill && !skill.unlocked && skill.condition()) {
    skill.unlocked = true;
    skill.apply();
    updateUI();
    saveGame();
  }
}

function renderAchievements() {
  achievementArea.innerHTML = "<h2>ğŸ† ç§°å·</h2>";
  achievements.forEach(a => {
    if (!a.unlocked && a.condition()) {
      a.unlocked = true;
      alert(`ç§°å·ç²å¾—ï¼ã€Œ${a.name}ã€`);
    }
    const div = document.createElement('div');
    div.className = 'achievement' + (a.unlocked ? ' unlocked' : '');
    div.textContent = a.name;
    achievementArea.appendChild(div);
  });
}

function applySkillEffects() {
  // ã‚¹ã‚­ãƒ«åŠ¹æœã¯unlockSkill()ã§ç›´æ¥åæ˜ æ¸ˆã¿ãªã®ã§ã“ã“ã¯ä»Šã¯ä¸è¦
}

function updatePassive() {
  passiveBonus = basePassiveBonus;
  let totalCps = 0;
  facilities.forEach(f => totalCps += f.count * f.cps);

  if (cookieStormActive) {
    totalCps *= 4;  // ã‚¯ãƒƒã‚­ãƒ¼ã‚¹ãƒˆãƒ¼ãƒ ä¸­ã¯ç”Ÿç”£é‡3å€
  }

  passiveBonus += totalCps;
}

function gameLoop() {
  // ã‚¯ãƒƒã‚­ãƒ¼ã‚¹ãƒˆãƒ¼ãƒ ã®æ™‚é–“ç®¡ç†
  if (cookieStormActive) {
    cookieStormTimer -= 100;
    if (cookieStormTimer <= 0) {
      cookieStormActive = false;
      cookieStormTimer = 0;
      alert("ã‚¯ãƒƒã‚­ãƒ¼ãƒ–ãƒ¼ã‚¹ãƒˆçµ‚äº†ï¼");
    }
  }

  // ã‚¯ãƒ¼ãƒ«ãƒ€ã‚¦ãƒ³ç®¡ç†
  if (cookieStormCooldown > 0) {
    cookieStormCooldown -= 100;
    if (cookieStormCooldown < 0) cookieStormCooldown = 0;
  }

  updatePassive();
  cookieCount += passiveBonus / 10; // 100msã”ã¨ã«1/10ç§’åˆ†åŠ ç®—
  updateUI();
  saveGame();

  updateStormButton(); // 

  setTimeout(gameLoop, 100);
}
function updateStormButton() {
  const stormBtn = document.getElementById("stormBtn");
  if (cookieStormActive) {
    stormBtn.disabled = true;
    stormBtn.textContent = `âš¡ã‚¯ãƒƒã‚­ãƒ¼ãƒ–ãƒ¼ã‚¹ãƒˆï¼ˆæ®‹ã‚Š${(cookieStormTimer/1000).toFixed(1)}ç§’ï¼‰âš¡`;
  } else if (cookieStormCooldown > 0) {
    stormBtn.disabled = true;
    stormBtn.textContent = `âš¡ã‚¯ãƒ¼ãƒ«ãƒ€ã‚¦ãƒ³ä¸­ï¼ˆ${(cookieStormCooldown/1000).toFixed(1)}ç§’ï¼‰âš¡`;
  } else {
    stormBtn.disabled = false;
    stormBtn.textContent = "âš¡ã‚¯ãƒƒã‚­ãƒ¼ãƒ–ãƒ¼ã‚¹ãƒˆç™ºå‹•âš¡";
  }
}

function resetGame() {
  if (!confirm("æœ¬å½“ã«å†ç”Ÿï¼ˆãƒªã‚»ãƒƒãƒˆï¼‰ã—ã¾ã™ã‹ï¼Ÿ\nå…¨ã¦ã®ã‚¯ãƒƒã‚­ãƒ¼ã¨æ–½è¨­æ•°ãŒãƒªã‚»ãƒƒãƒˆã•ã‚Œã¾ã™ã€‚")) return;
  prestige += Math.floor(cookieCount/10000); // 10000ã‚¯ãƒƒã‚­ãƒ¼ã”ã¨ã«1ãƒ—ãƒ¬ãƒŸã‚¢ãƒ 
  cookieCount = 0;
  facilities.forEach(f => {
    f.count = 0;
    f.cost = f.baseCost;
    f.cps = f.baseCps;
  });
  basePassiveBonus = 0;
  skills.forEach(s => s.unlocked = false);
  achievements.forEach(a => a.unlocked = false);
  updateUI();
  saveGame();
}

function hardReset() {
  if (!confirm("å…¨ãƒ‡ãƒ¼ã‚¿ã‚’å®Œå…¨å‰Šé™¤ã—ã¦åˆæœŸçŠ¶æ…‹ã«æˆ»ã—ã¾ã™ã‹ï¼Ÿ")) return;
  cookieCount = 0;
  prestige = 0;
  facilities.forEach(f => {
    f.count = 0;
    f.cost = f.baseCost;
    f.cps = f.baseCps;
  });
  basePassiveBonus = 0;
  skills.forEach(s => s.unlocked = false);
  achievements.forEach(a => a.unlocked = false);
  updateUI();
  saveGame();
}

function saveGame() {
  const saveData = {
    cookieCount,
    prestige,
    facilities: facilities.map(f => ({ count: f.count, cost: f.cost, cps: f.cps })),
    skills: skills.map(s => ({ id: s.id, unlocked: s.unlocked })),
    achievements: achievements.map(a => ({ id: a.id, unlocked: a.unlocked })),
    basePassiveBonus
  };
  localStorage.setItem('cookieClickerSave', JSON.stringify(saveData));
}
  // ã‚»ãƒ¼ãƒ–æ™‚é–“è¡¨ç¤º
  const saveElem = document.getElementById("saveStatus");
  const now = new Date();
  const timeStr = now.toLocaleTimeString();
  if (saveElem) {
    saveElem.textContent = `ğŸ’¾ ${timeStr} ã«ã‚»ãƒ¼ãƒ–ã—ã¾ã—ãŸ`;
       saveElem.classList.add("flash");
  setTimeout(() => {
    saveElem.classList.remove("flash");
  }, 500); // 0.5ç§’ã§æˆ»ã™
}


function loadGame() {
  const saveStr = localStorage.getItem('cookieClickerSave');
  if (!saveStr) return;
  try {
    const saveData = JSON.parse(saveStr);
    cookieCount = saveData.cookieCount || 0;
    prestige = saveData.prestige || 0;
    if (saveData.facilities) {
      saveData.facilities.forEach((f, i) => {
        if (facilities[i]) {
          facilities[i].count = f.count || 0;
          facilities[i].cost = f.cost || facilities[i].baseCost;
          facilities[i].cps = f.cps || facilities[i].baseCps;
        }
      });
    }
    if (saveData.skills) {
      skills.forEach(s => {
        const saved = saveData.skills.find(sk => sk.id === s.id);
        s.unlocked = saved ? saved.unlocked : false;
      });
    }
    if (saveData.achievements) {
      achievements.forEach(a => {
        const saved = saveData.achievements.find(ac => ac.id === a.id);
        a.unlocked = saved ? saved.unlocked : false;
      });
    }
    basePassiveBonus = saveData.basePassiveBonus || 0;
  } catch (e) {
    console.error('ã‚»ãƒ¼ãƒ–ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸ', e);
  }
}

function formatNumber(num) {
  const units = [
    { value: 1e68, suffix: 'ç„¡é‡å¤§æ•°' },
    { value: 1e64, suffix: 'ä¸å¯æ€è­°' },
    { value: 1e60, suffix: 'é‚£ç”±ä»–' },
    { value: 1e56, suffix: 'é˜¿åƒ§ç¥‡' },
    { value: 1e52, suffix: 'æ’æ²³æ²™' },
    { value: 1e48, suffix: 'æ¥µ' },
    { value: 1e44, suffix: 'è¼‰' },
    { value: 1e40, suffix: 'æ­£' },
    { value: 1e36, suffix: 'æ¾—' },
    { value: 1e32, suffix: 'æº' },
    { value: 1e28, suffix: 'ç©£' },
    { value: 1e24, suffix: 'ğ¥±' }, // ã¾ãŸã¯ "ç§­"
    { value: 1e20, suffix: 'å“' },
    { value: 1e16, suffix: 'äº¬' },
    { value: 1e12, suffix: 'å…†' },
    { value: 1e8,  suffix: 'å„„' },
    { value: 1e4,  suffix: 'ä¸‡' },
    { value: 1e3,  suffix: 'åƒ' }
  ];

  for (const unit of units) {
    if (num >= unit.value) {
      return (num / unit.value).toFixed(2).replace(/\.00$/, '') + unit.suffix;
    }
  }

  return num.toLocaleString(); // 1000æœªæº€ã¯ãã®ã¾ã¾è¡¨ç¤ºï¼ˆã‚«ãƒ³ãƒã‚ã‚Šï¼‰
}




function buyFacilityByName(name) {
  const f = facilities.find(fac => fac.name === name);
  if (!f) return;
  if (cookieCount >= f.cost) {
    cookieCount -= f.cost;
    f.count++;
    f.cost = Math.floor(f.cost * 1.2);
    updateUI();
    saveGame();
  }
}

function startCookieStorm() {
  if (cookieStormActive || cookieStormCooldown > 0) {
    alert("ã‚¯ãƒƒã‚­ãƒ¼ãƒ–ãƒ¼ã‚¹ãƒˆã¯ã¾ã ä½¿ãˆã¾ã›ã‚“ï¼");
    return;
  }
  cookieStormActive = true;
  cookieStormTimer = 10000; // 10ç§’é–“ï¼ˆãƒŸãƒªç§’ï¼‰
  cookieStormCooldown = 60000; // 60ç§’ã‚¯ãƒ¼ãƒ«ãƒ€ã‚¦ãƒ³

  alert("âš¡ã‚¯ãƒƒã‚­ãƒ¼ãƒ–ãƒ¼ã‚¹ãƒˆç™ºå‹•ï¼10ç§’é–“ç”Ÿç”£é‡3å€ï¼âš¡");
}
function toggleTheme() {
  const body = document.body;
  if (body.classList.contains("space-theme")) {
    body.classList.remove("space-theme");
    body.classList.add("default-theme");
  } else {
    body.classList.remove("default-theme");
    body.classList.add("space-theme");
  }
}

function changeCookieStyle(style) {
  cookieStyle = style;
  drawCookie(); 
}

// åˆæœŸåŒ–
loadGame();
updateUI();
updateStormButton();
gameLoop();
</script>
</body>
</html>
